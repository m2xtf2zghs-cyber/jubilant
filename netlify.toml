[build]
  base = "jubilant"
  # Use `npm install` (not `npm ci`) so deploys don't hard-fail when `package.json` changes before the lockfile is updated.
  command = "node -v && npm -v && npm_config_production=false npm install --no-audit --no-fund && npm run build"
  publish = "dist"
  functions = "netlify/functions"

[build.environment]
  # Use a major version so Netlify selects an available Node 20.x build image.
  NODE_VERSION = "20"
  # Skip Netlify's automatic dependency install; we do it in the build command above.
  NETLIFY_SKIP_INSTALL = "true"

[functions]
  node_bundler = "esbuild"
